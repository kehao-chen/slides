---
UTC æ™‚é–“

(1) å°‡æ­¤è™›æ“¬æ©Ÿçš„æ™‚å€è¨­ç½®ç‚ºUTCã€‚
(2) é‡å•Ÿè™›æ“¬æ©Ÿã€‚
(3)å†æ¬¡æª¢æŸ¥è©²è™›æ“¬æ©Ÿçš„æ¿€æ´»ç‹€æ…‹æ˜¯å¦æ¢å¾©æ­£å¸¸ã€‚
 
å¾®è»Ÿç”¢å“çµ„ç›®å‰æ­£åœ¨è™•ç†æ­¤å•é¡Œï¼Œæ­¤å•é¡Œçš„ä¿®å¾©ç¨‹åºå¯èƒ½æœƒåœ¨ 5 æœˆåº•ä»¥ Windows æ›´æ–°çš„å½¢å¼æä¾›ã€‚
 å…·é«”æ™‚é–“å°šæœªç¢ºå®šï¼Œä»¥ä¸Šä¿¡æ¯åƒ…ä¾›åƒè€ƒã€‚


---
ä¸å¥½æ„æ€åœ¨æ­¤è©¢å•ï¼Œé€™ä¸ç®—æ˜¯ Azure çš„æŠ€è¡“å•é¡Œè€Œæ˜¯è¡Œæ”¿æµç¨‹å•é¡Œã€‚è‹¥è¦ç”³è«‹ Azure ä¸Šçš„æ‡‰ç”¨ Internet é€£å‡ºï¼Œéœ€è¦æå‡ºè³‡è¨Šç®¡ç†å§”å“¡æœƒæ ¸å‡†ä¾‹å¤–ç”³è«‹å–® (Azure) ä¸¦ç²å¾—å„å®¶åˆ†å…¬å¸çš„è³‡è¨Šç®¡ç†å§”å“¡æœƒä»£è¡¨ç°½ç« 

---
Azure æ˜¯å¦å¯ä»¥åŠ å…¥åˆ° HiLink MPLS VPN

https://hicloud.hinet.net/cmcx.html
---
AAD
Push ACR/AAD



https://docs.microsoft.com/en-us/azure/app-service/troubleshoot-diagnostic-logs

æ­¤ä¸€è­°é¡Œé™¤äº† App Service è­°é¡Œå¤–ï¼Œé‚„åŒ…å«é˜²ç«ç‰†è¦å‰‡è­°é¡Œæ•…åœ¨æ­¤æå‡ºã€‚å°æ–¼ä½¿ç”¨ Azure App Service çš„åœ˜éšŠï¼Œå¦‚æœä¸é€é Azure Pipelines self-hosted agentï¼Œè€Œæ˜¯æƒ³é€é Azure App Service Deployment Center é€²è¡Œè‡ªå‹•éƒ¨ç½²ï¼Œå‰‡éœ€è¦å¢åŠ ä¸€æ¢é˜²ç«ç‰†é€£å‡ºå±€æƒ… https://oryx-cdn.microsoft.io

ç„¶è€Œ Azure ç•¶å‰çš„ Internet é˜²ç«ç‰†é€£å‡ºè¦å‰‡ç”³è«‹ï¼Œåƒ…å…è¨± IP æˆ–æ˜¯ CIDR æ ¼å¼ï¼Œä¸¦ä¸æ¥å— FQDN æ ¼å¼ã€‚é‚£éº¼é‡å° oryx-cdn.microsoft.io é€™å€‹ domainï¼ŒåŒ–ç‚º CIDR æ ¼å¼å°±æœƒæœ‰ 74 æ¢é€£å‡ºè¦å‰‡ä¸¦ä¸”éš¨æ™‚æœ‰å¯èƒ½ç•°å‹•

é€™å€‹æƒ…æ³ä¸åƒ…æœ‰ Azure App Service Deployment Centerï¼Œä½¿ç”¨ Firebase ç­‰å¤–éƒ¨æœå‹™ä¹Ÿæœƒæœ‰æ­¤å•é¡Œï¼Œä¸æ›‰å¾—å…¶ä»–åœ˜éšŠæ˜¯å¦‚ä½•è§£æ±ºé‚„æ˜¯å°±æŸ¥æ‰¾å°æ‡‰çš„ CIDR ç¯„åœä¸€æ¢æ¢æå‡ºç”³è«‹ï¼Ÿ

Detecting platforms... Error: Oops... An unexpected error has occurred. Â· Issue #971 Â· microsoft/Oryx Â· GitHub
	
Cannot deploy an Azure Function when Azure Function App is enabled with VNET integration Â· Issue #1126 Â· microsoft/Oryx Â· GitHub



---
Defender for Cloud çš„ storage 



---
[6/21 9:25 AM] å¾æ•å“²
    ä¹‹å‰å•éï¼ŒAzure Stack HCIåªæä¾›NCCç´ç®¡ç·šä¸Šç’°å¢ƒç”³è«‹ä½¿ç”¨ï¼Œå…¶ä»–è«‹å…¥å…¬é›²ã€‚ä½†éƒ½å·²ç¶“å¿«è¦Q3äº†ï¼Œé‚„ä¸è¦‹Azureè½åœ°ï¼Œæ‰æœƒæå‡ºä¾†åæ‡‰ã€‚
â€‹[6/21 9:26 AM] å¾æ•å“²
    å¦‚æœè¦å…¥ä½æ±æ—¥æœ¬ï¼Œæ˜¯å¦å¯ä»¥è«‹itPetsç³»çµ±å°‡åµæ¸¬å‘Šè­¦çš„è¦å‰‡æ”¾å¯¬?ä¸ç„¶å…¥å…¬é›²å¾Œï¼Œå¾ˆå®¹æ˜“å°±å‘Šè­¦äº†

---

è¬ä¸€æµ·çºœæ–·ç·šï¼Œé›–æœ‰å‚™æ´ç·šè·¯ï¼Œä½†å¿…æœƒé˜»å¡è®Šæ…¢ã€‚å¦‚æœä½ èƒ½æ’ä½å£“åŠ›ï¼Œç•™åœ¨æ±æ—¥æœ¬ä¹Ÿæœªå˜—ä¸å¯ã€‚

å€‹äººå° itPETS çš„å¯ç”¨åº¦åˆ¤å®šæ©Ÿåˆ¶ä¸¦ä¸ç­è§£ï¼Œæ‰€ä»¥æ˜¯éŸ¿æ‡‰æ™‚é–“è¶…éé–¾å€¼å°±æœƒè¦–ç‚ºæœå‹™å¤±æ•ˆï¼Œè€Œé€™å€‹éŸ¿æ‡‰æ™‚é–“æ˜¯ä¸€å€‹å›ºå®šå€¼é‚„æ˜¯å¯ä»¥è¨­å®šèª¿æ•´çš„ï¼Ÿå€‹äººå·²åˆæ­¥ç­è§£ itPETSçš„å¯ç”¨åº¦æœƒåˆ—å…¥æˆç¸¾è€ƒæ ¸ï¼Œä¹Ÿå› æ­¤é€²é§ Japan region æœ‰å¯èƒ½æœƒå¢åŠ  itPETS è­˜åˆ¥ç‚ºéšœç¤™çš„é¢¨éšª


https://teams.microsoft.com/l/message/19:a23290ed56344e668aa863184fe0086c@thread.tacv2/1654073257838?tenantId=54eb9440-cf03-45fe-835e-61bd4ce515c8&groupId=a88fcc0c-e7ad-4b25-ac90-f2ed0bc64fd1&parentMessageId=1652257601102&teamName=Azure%20%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AD%B0%E8%88%87%E5%95%8F%E9%A1%8C%E8%A8%8E%E8%AB%96&channelName=%E4%B8%80%E8%88%AC&createdTime=1654073257838


åœ¨æ­¤æä¾›å€‹äººè§£æ³•ï¼Œä½†çš†ç‚º workaround éå…¬èªè§£æ³•ã€‚ç¬¬ä¸€ç¨®æ˜¯è‡ªå»º DNS (å€‹äººä½¿ç”¨ CoreDNS)ï¼Œé‡å° *.cht.com.tw çš„è§£ææŒ‡å‘ OA çš„ DNS æœå‹™ï¼Œå…¶ä»–ä»åƒè€ƒ Azure çš„ DNS æœå‹™ï¼Œå¦‚æ­¤ä¾¿å¯ä»¥æ­£å¸¸è§£æ private DNS zone çš„ recordsï¼Œä¹Ÿå¯ä»¥è§£æ OA ç‰¹æœ‰çš„ recordsã€‚å¦ä¸€ç¨®åšæ³•æ˜¯åœ¨ Azure App Service æ›ä¸Š custom domainï¼Œä¸ä½¿ç”¨ private DNS zone è¨»å†Šçš„ domain

Custom domain ç”³è«‹æœƒéœ€è¦å¤šä¸€çµ„ TXT record åš domain æ“æœ‰è€…çš„é©—è­‰ï¼Œä¹‹å‰èˆ‡ DNS ç®¡ç†å“¡å»ºé‚¦å…„è«®è©¢ï¼ŒåŒæ¨£ä½¿ç”¨ IS-10 ç”³è«‹ï¼Œåœ¨èªªæ˜æ¬„ä½æ•˜è¿°è©² TXT record çš„å…§å®¹èˆ‡ç”¨é€”å³å¯

 



Type
Host
Value

A
xxx.cht.com.tw
åœ°ç«¯ç’°å¢ƒ IP

TXT
asuid.xxx.cht.com.tw
å¾®è»Ÿæä¾›ç”¨æ–¼èº«ä»½èªè­‰å€¼


---

é€™å€‹è·Ÿ Azure Firewall çš„æ©Ÿåˆ¶æœ‰é—œï¼Œä¸èƒ½ç´”ç²¹çœ‹æ˜¯å¦å¯ä»¥å»ºç«‹ TCP é€£ç·šä¾†åˆ¤æ–·æ˜¯å¦æœ‰é–‹é€šé˜²ç«ç‰†è¦å‰‡ï¼Œä»¥å€‹äººçš„åšæ³•æ˜¯ä½¿ç”¨ tcptraceroute èˆ‡ openssl s_client ä¾†ç¢ºèª
 

Azure Firewall ã®å„ãƒ«ãƒ¼ãƒ«ã®å‹•ä½œã«ã¤ã„ã¦ | Japan Azure IaaS Core Support Blog (jpaztech.github.io)

https://jpaztech.github.io/blog/network/firewall-rules/

é€™æ˜¯ç”±æ–¼æ‚¨çš„Vnetæ˜¯é€£æ¥åˆ°VHubä¸Šçš„ï¼Œæ‰€æœ‰çš„å†…éƒ¨æµé‡éƒ½å°‡ç¶“éVhubä¸­çš„Azure Firewall. Telnet 80 ç«¯å£æœƒé€šï¼Œå…¶å¯¦æ˜¯å› çˆ²æˆ‘å€‘Firewallçš„ç‰¹æ€§ï¼Œå››å±¤çš„80å’Œ443ç«¯å£æ¸¬è©¦æ˜¯å°é˜²ç«å¢»çš„80å’Œ443ç«¯å£æ¸¬è©¦ï¼Œå¹¶æœªåˆ°é”ç›®çš„ç«¯ï¼Œæ‰€ä»¥ä¸€ç›´æ˜¯é€šçš„ã€‚

 

æ ¹æ“šæˆ‘å€‘å¾Œè‡ºçš„æŸ¥çœ‹ï¼Œé€™å€‹firewallæ‡‰è©²æ˜¯å•“ç”¨äº†DNS proxyåŠŸèƒ½ï¼Œå¹¶ä¸”ä½¿ç”¨äº†è‡ªå®šç¾©çš„DNSæœå‹™å™¨é€²è¡Œè§£æã€‚æ‚¨æåˆ°å†…éƒ¨åŸŸåç›¸é—œçš„Application Ruleå·²ç¶“æ·»åŠ äº†ï¼Œä¸éç›®å‰çœ‹ä¾†å­˜åœ¨è§£æå¤±æ•—çš„å•é¡Œã€‚ç”±æ–¼å¾®è»Ÿçš„å®¢æˆ¶éš±ç§æ”¿ç­–ï¼Œæˆ‘å€‘ç„¡æ³•æŸ¥çœ‹VWANé‚£é‚Šçš„ä¿¡æ¯ï¼Œæ‰€ä»¥é‚„ç…©è«‹æ‚¨è¯ä¿‚ä¸€ä¸‹ç®¡ç†VWANçš„åŒäº‹ï¼Œä»¥ä¾¿æˆ‘é€²è¡Œä¸€äº›å¾ŒçºŒçš„èª¿æŸ¥ã€‚



---
ç™»å…¥ç›¸é—œçš„å•é¡Œï¼Œè«‹æ´½ è³‡è¨ŠæŠ€è¡“åˆ†å…¬å¸/ä¼æ¥­æ‡‰ç”¨ç³»çµ±ç™¼å±•è™•/ä¼æ¥­åŸºç¤æœå‹™ç™¼å±•ç§‘ï¼Œé€™æ˜¯ç™»å…¥æ”¿ç­–çš„ç®¡ç†å–®ä½

---
POC ç’°å¢ƒ Cloud Shell

---

é€™æ˜¯ç”±æ–¼ Azure å…¬é›²ç®¡ç†å–®ä½è¨­å®š policy å°è‡´ç„¡æ³•åœç”¨å®‰å…¨å‚³è¼¸ï¼Œå¯ä»¥å‘ Azure å…¬é›²ç®¡ç†å–®ä½ç”³è«‹è±å…ã€‚ä¸éä¹Ÿç”±æ–¼ Azure Storage Account çš„ NFS ä¸æ”¯æ´å®‰å…¨å‚³è¼¸ï¼Œå› æ­¤å¯¦ä½œè€…éœ€è¦è‡ªè¡Œåšå¥½è£œå„Ÿæªæ–½ï¼Œä½¿ç”¨ private endpoint + NSG é€²è¡Œé€£ç·šç®¡æ§
 

 

é‡å° NFS æª”æ¡ˆå…±ç”¨å•é¡Œé€²è¡Œç–‘é›£æ’è§£ - Azure æª”æ¡ˆå„²å­˜é«” | Microsoft Learn

æ¡Œé¢é›²VDI  éœ€è¦ç”±OAç¶²æ®µæ“ä½œ.  ç¶“éHiGate2 åˆ°  è¨‚é–±å°ˆå±¬çš„è·³æ¿æ©Ÿã€‚   è¦Interneté€éHiGate1 é€²ä¾†æ“ä½œæ¡Œé¢é›²VDI æ‡‰è¦ç”³è«‹eform IS05ã€‚

è«‹æ•™ä¸€å€‹å•é¡Œ, å¦‚æœæƒ³å¾ azure portal ä¸Š, ä½¿ç”¨ storage browser æŸ¥çœ‹ storage account ä¸‹çš„æª”æ¡ˆ, éœ€è¦åšä»€éº¼æ¨£çš„è¨­å®š, ç›®å‰é é¢é•·é€™æ¨£

åªè¦æŒ‰ç…§æç¤ºçš„è¦æ±‚ï¼Œå¢åŠ æ‰€éœ€çš„ asuid.xxx.hinet.net çš„ TXT recordï¼Œåšç‚º FQDN owner çš„é©—è­‰ï¼Œæ‡‰å°±å¯ä»¥é †åˆ©åŠ å…¥å§ï¼Ÿ

---
ä¸‰ç´šä»¥ä¸Šç³»çµ±éƒ½éœ€é€éè·³æ¿æ©Ÿç¶­é‹
	
Azure Portal åªèƒ½é€éè·³æ¿æ©Ÿå­˜å–

---
è‹¥ Application Gateway èƒ½æ¥æ”¶ Internet é€£å…¥ï¼Œéœ€å’Œå…¶ä»–è³‡æºåˆ†é–‹ï¼Œå»ºç½®åœ¨ä¸€å€‹ç¨ç«‹çš„ VNET å’Œè³‡æºç¾¤çµ„ (æœªä¾†å¯èƒ½èˆ‡ Internet èƒ½é€£æ¥çš„è³‡æºéƒ½æœƒæ¯”ç…§è™•ç†)
	
è‹¥ç„¡æ³•æ»¿è¶³ 1ï¼ŒApplication Gateway éœ€è¦æ‹‹ Log åˆ° SOCï¼Œä¸”åŸ·è¡Œèˆ‡é˜²ç«ç‰†ç­‰æ•ˆçš„ç®¡æ§æªæ–½

å¯èƒ½å°±æ˜¯è¦æ‹‹ NSG Flow Log çµ¦ SOC



---
## PaaS æ—¥èªŒæ”¶æ”è‡³ LS/LC

![40%](./assets/azure-monitor-2-syslog_overview.png)

[GitHub - miguelangelopereira/azuremonitor2syslog: Forward Azure monitor logs to syslog (via Event Hub)](https://github.com/miguelangelopereira/azuremonitor2syslog/)

---
å€‹äººèªç‚ºæ¯”è¼ƒæœ‰çˆ­è­°çš„æœƒæ˜¯ storage èˆ‡ DNSï¼Œå¦‚æœ DNS éƒ½æ˜¯ä½¿ç”¨å¾®è»Ÿæˆ–æ˜¯ä¸­è¯å…§éƒ¨çš„ DNS æœå‹™ï¼Œé‚£éº¼æœ‰éœ€è¦ç‰¹åˆ¥å•Ÿç”¨ Microsoft Defender for DNS å—ï¼Ÿ
 
ç›®å‰æ•å–®ä½çš„ Azure Defender è²»ç”¨é«˜æ˜‚ï¼Œå€‹äººçŒœæ¸¬æ˜¯ storage çš„ç”¨é‡å•é¡Œï¼Œä¹Ÿè¨±è·Ÿ Elasticsearch cluster æœ‰é—œï¼Œä½†å¦‚æœ storage é™åˆ¶ä¸¦éå…¬é–‹ï¼Œåƒ…æœ‰æœå‹™æ‡‰ç”¨å¯ä»¥å­˜å–ä½¿ç”¨ï¼Œæœ‰éœ€è¦ç‰¹åˆ¥å•Ÿç”¨ Microsoft Defender for Storage å—ï¼Ÿå®ƒä¸»è¦æƒ³é˜²è­·çš„å°è±¡æ‡‰è©²æ˜¯å¯è¢«å…¬é–‹å­˜å–çš„ storageï¼Œè€Œé€™é …åœ¨ç›®å‰çš„è¦ç¯„æ‡‰æ˜¯ä¸è¢«å…è¨±çš„

https://learn.microsoft.com/en-us/azure/defender-for-cloud/defender-for-storage-introduction

---

> é€²é§å…¬é›²å®‰å…¨å ¡å£˜çš„è¨­å‚™éƒ½è¦åšæ—¥èªŒæ”¶å®¹ï¼Œ
> æ‰€ä»¥ä¸ç®¡ç³»çµ±æ˜¯å¹¾ç´š


[Azure ä½¿ç”¨å»ºè­°èˆ‡å•é¡Œè¨è«– / å…¬å‘Š ğŸ“¢](https://teams.microsoft.com/l/message/19:c3761d499de64d45ad8cd035582900be@thread.tacv2/1666149108017?tenantId=54eb9440-cf03-45fe-835e-61bd4ce515c8&groupId=a88fcc0c-e7ad-4b25-ac90-f2ed0bc64fd1&parentMessageId=1666149108017&teamName=Azure%20%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AD%B0%E8%88%87%E5%95%8F%E9%A1%8C%E8%A8%8E%E8%AB%96&channelName=%E5%85%AC%E5%91%8A%20%F0%9F%93%A2&createdTime=1666149108017&allowXTenantAccess=false)

---
9.Azure proxy :10.198.135.4  port 80 (é˜²ç«ç‰†éœ€é¡å¤–é–‹é€š)

æœ‰proxy éœ€æ±‚è«‹mailçµ¦ é¡å£«å‚‘ã€å³ç§‰ç© åšè¦å‰‡çš„é–‹é€š

è¯çµ¡çª—å£:	è³‡åˆ† é¡å£«å‚‘(Azure Proxyç®¡ç†å“¡)

---
8.Azure DNS :10.198.250.10 (é˜²ç«ç‰†é è¨­å·²é–‹é€š)

---
https://learn.microsoft.com/en-us/azure/architecture/example-scenario/gateway/firewall-application-gateway#application-gateway-after-firewall


---

App GW

Rule
---

é›–ç„¶ Azure Application Gateway v2 æ”¹å–„äº†é€™å€‹å•é¡Œï¼Œä½¿å¾—ä»»ä½•è¨­å®šè®Šæ›´å¯ä»¥ç«‹å³ç”Ÿæ•ˆï¼Œä½†æ˜¯ Azure Application Gateway v2 å‹¢å¿…æœƒéœ€è¦ä¸€çµ„ Public IP è³‡æºã€‚åœ¨ Azure å®˜æ–¹çš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¦ç¦æ­¢ Internet çš„é€£å…¥ï¼Œå‰‡å»ºè­°å¯ä»¥åœ¨ NSG ä¸­åŠ å…¥é˜»æ“‹è¦å‰‡

Application Gateway V2 currently does not support only private IP mode. It supports the following combinations

 


	
Private IP and Public IP
	
Public IP only

â€”â€”â€”â€” Frequently asked questions about Azure Application Gateway | Microsoft Docs

---
[3/6 11:27 PM] é™³ç§‘è±ªé—œæ–¼ Azure æ··åˆé›²ç¶²è·¯æ¶æ§‹çš„è¦åŠƒå¾®å¿ƒå¾—
    


TL;DR å»ºè­°ç›´æ¥ä½¿ç”¨ Azure æ··åˆé›²çš„ IP ä¾†å»ºç«‹é‹ç®—è³‡æº


åœ¨åœ°ç«¯æ©Ÿæˆ¿çš„ç¶²è·¯æ¶æ§‹ï¼Œé‹ç®—è³‡æº (e.g. VM) ä¸¦ä¸æœƒç›´æ¥ä½¿ç”¨ 10.0.0.0/8 (CHT Net) çš„ private IPï¼Œè€Œæ˜¯é€šå¸¸æœƒå»ºç«‹åœ¨ 172.16.0.0/12 æˆ–æ˜¯ 192.168.0.0/16 çš„ç¶²æ®µä¸­ï¼Œè‹¥éœ€è¦å…¶ä»–åœ¨åœ°ç«¯ç’°å¢ƒçš„æœå‹™ä¸²æ¥ï¼Œæˆ–é€é SNAT æˆ 10.0.0.0/8 çš„ private IPï¼Œå†èˆ‡å…¶ä»–åœ°ç«¯æœå‹™ä¸²æ¥ã€‚è€Œé€™æ¨£çš„å¥½è™•åœ¨æ–¼è‹¥ä¹‹å¾Œ VM æ“´å¢ï¼Œæˆ–æ˜¯ Refactoring ä½¿å¾—ç³»çµ±æ¶æ§‹æ”¹è®Šé·ç§»åˆ° Azure App Services æˆ–æ˜¯ Azure Kubernetes Services å¹³è‡ºï¼Œç”±æ–¼åœ°ç«¯é˜²ç«ç‰†å±€æƒ…ç”³è«‹æ™‚çš„ä¾†æº IP ç‚º SNAT IPï¼Œå› æ­¤é‹ç®—è³‡æºçš„ IP ç•°å‹•ä¸¦ä¸ä¸æœƒéœ€è¦é‡æ–°ç”³è«‹åœ°ç«¯åœ°ç«¯é˜²ç«ç‰†å±€æƒ…è¦å‰‡


åœ¨ Azure è‹¥æƒ³è¦é”åˆ°æ­¤ä¸€ç›®çš„ï¼Œå‰‡éœ€è¦é€é Azure Firewall æ­¤ä¸€ç¶²è·¯å…ƒä»¶ï¼Œç„¶è€Œ Azure Firewall æ˜¯éœ€è¦æ“æœ‰ä¸€å€‹ Public IP æ‰å¯ä»¥å»ºç«‹ï¼Œé€™é•æ³•äº†å…¬å¸ç›®å‰æ‰€åˆ¶å®šçš„ Azure ç®¡ç†æ”¿ç­–ï¼Œå› æ­¤åªèƒ½å°‹æ±‚å…¶ä»–è§£æ±ºæ–¹æ³•ã€‚åœ¨ Azure ä¸­ï¼ŒAzure Load Balancer ç›¸ç•¶æ–¼ L4 switch çš„å­˜åœ¨ï¼Œé‚£æ˜¯å¦å¯ä»¥ä½œç‚º L4 proxyï¼Œé€é Azure Load Balancer å»å­˜å–åœ°ç«¯è³‡æºå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸è¡Œï¼Œå› ç‚º Azure Load Balancer é™åˆ¶ backend resource å¿…é ˆæ˜¯èˆ‡ Azure Load Balancer åŒä¸€å€‹ VNet ä¸Šçš„ IP/NICï¼Œä¸èƒ½ä½¿ç”¨åœ°ç«¯æœå‹™çš„ private IPã€‚é‚£ Azure Application Gateway ç›¸ç•¶æ–¼ L7 switch çš„å­˜åœ¨ï¼Œæ˜¯å¦å¯ä»¥åšç‚º L7 proxyï¼Œé€é Azure Application Gateway å»å­˜å–åœ°ç«¯è³‡æºå‘¢ï¼Ÿå¦‚æœéœ€è¦å­˜å–çš„åœ°ç«¯ç’°å¢ƒï¼Œå…¶ä½¿ç”¨çš„å”è­°ç‚º HTTP/HTTPS/WebSocketï¼Œå‰‡ç­”æ¡ˆç‚ºå¯ä»¥ï¼Œä½†å¦‚æœéœ€è¦ SFTPã€JMSã€AMQP ç­‰å…¶ä»–å”è­°ï¼Œå‰‡ Azure Application Gateway å°šä¸æ”¯æ´


æˆ–è¨±æœ‰åŒä»å¯èƒ½æœƒæƒ³åˆ°ï¼Œé‚£æ˜¯å¦å¯ä»¥ä½¿ç”¨ Nginx/HAProxy ä¾†å»ºç«‹è»Ÿé«”çš„ L4 proxy å‘¢ï¼Ÿç°¡å–®èªªçµè«–ï¼ŒAzure App Services (Container) ç„¡æ³•ç”¨æ–¼å»ºç«‹ L4 proxyï¼Œå–®ç¨ä½¿ç”¨ Azure Virtual Machine æˆ–æ˜¯ Azure Container Instances å‰‡å¯ä»¥é‹ä½œï¼Œä½†è€ƒæ…®åˆ° high availabilityï¼Œå€‹äººç›®å‰æƒ³ä¸åˆ°ä»»ä½•è§£æ³•ï¼Œå› ç‚ºåªè¦å†åŠ ä¸Š Azure Load Balancer éƒ¨åˆ†çš„é€£ç·šå°±æœƒç™¼ç”Ÿå•é¡Œ (e.g. SFTP)


ç¸½çµä¾†èªªï¼Œå€‹äººå»ºè­°ç›´æ¥ä½¿ç”¨ Azure æ··åˆé›²çš„ IP ä¾†å»ºç«‹é‹ç®—è³‡æºï¼Œé™¤éä¹‹å¾Œæœ‰ç†±å¿ƒçš„åŒä»å¯ä»¥å”åŠ©æ‰¾å‡º SNAT çš„è§£æ±ºæ–¹æ¡ˆ



(1 liked)Edited<https://teams.microsoft.com/l/message/19:1b87f752b87a44ef9f48d09d0a12ee61@thread.tacv2/1646580470730?tenantId=54eb9440-cf03-45fe-835e-61bd4ce515c8&amp;groupId=a88fcc0c-e7ad-4b25-ac90-f2ed0bc64fd1&amp;parentMessageId=1646580470730&amp;teamName=Azure ä½¿ç”¨å»ºè­°èˆ‡å•é¡Œè¨è«–&amp;channelName=01. æ··åˆé›² (Azureèˆ‡CHTNETä»‹æ¥) è­°é¡Œ&amp;createdTime=1646580470730&amp;allowXTenantAccess=false>


---

## Azure Database (PaaS)

Azure Database (PaaS) çš„ CHT åƒè€ƒæŒ‡å—
https://teams.microsoft.com/l/channel/19%3Ab0ec73b9013c42b5aac3f00f55ac24d2%40thread.tacv2/tab%3A%3Abddc1570-848e-4446-a1bc-d86e72a79cda?groupId=a88fcc0c-e7ad-4b25-ac90-f2ed0bc64fd1&tenantId=54eb9440-cf03-45fe-835e-61bd4ce515c8&allowXTenantAccess=false

---

æ•´ç† LS (Log Sensor) èˆ‡ LC (Log Collector) æ–¼ Azure å…¬é›²çš„åŸ·è¡Œæ–¹æ³•ã€‚æ–¼å…¬å¸è¦å®šï¼Œå…¬å¸ç®¡ç†ä¹‹è¨­å‚™éœ€è¦å°‡æ—¥èªŒ(è³‡å®‰äº‹ä»¶ç´€éŒ„ã€å…§éƒ¨æƒ¡æ„æ´»å‹•åµæ¸¬å‘Šè­¦ç´€éŒ„ã€ç¨½æ ¸è»Œè·¡ç´€éŒ„)é€è‡³LS/LCï¼Œå†ç”± LS/LC å°‡é€™äº›æ—¥èªŒé€åˆ° SOC é€²è¡Œç´ç®¡ã€‚



é€šå¸¸å®‰å…¨å ¡å£˜æœƒæ¶è¨­LS/LCä¸»æ©Ÿï¼Œè€Œ Azure å…¬é›²å ¡å£˜ (CHT_Azure) çš„ LS/LC è² è²¬çª—å£ç‚ºé¡å£«æ°ï¼Œæ—¥èªŒç´ç®¡èˆ‡ç›£æ§éœ€å¡«å¯«è¡¨å–®å¾Œè«‹å£«æ°å…„å”åŠ©æå‡ºç”³è«‹ã€‚



ä¸€èˆ¬çš„ Azure ä½¿ç”¨æƒ…å¢ƒï¼Œé™¤é Azure AGW æˆ–æ˜¯ Azure Firewall ç­‰ç¶²è·¯å…ƒä»¶ï¼Œæœ‰ç›´æ¥å° Internet é€£æ¥ä¹‹éœ€æ±‚ï¼Œå¦å‰‡ç¶²è·¯çš„é€£å…¥/é€£å‡ºéƒ½æœƒé€é Azure å…¬é›²å ¡å£˜çš„æ§ç®¡ï¼Œå› æ­¤ç„¡éœ€å°‡å…¶é€£ç·šæ—¥èªŒé€è‡³ LS æ”¶å®¹ (å·²èˆ‡è³‡å®‰è™•æ¥·å¼·å…„èˆ‡ Azure CCoE ç§‰ç©å…„ç¢ºèªåšæ³•)



æ‡‰ç”¨ä¸»æ©Ÿçš„æ—¥èªŒæ”¶å®¹ï¼Œå®—éœ–å…„å·²æœ‰å‘å£«æ°å…„ç¢ºèªï¼Œç”³è«‹è¡¨å–®åŒ…å« ISDBã€è³‡ç”¢ EQ ç­‰éœ€å¡«å¯«æ¬„ä½ï¼Œå…¶ä¸­è³‡ç”¢ EQ éœ€æ–¼ ICTINV ä¸­ç™»éŒ„è¨­å‚™æ‰æœƒç”¢ç”Ÿã€‚ç›®å‰ä¹Ÿå°šç„¡å…¶ä»–ç³»çµ±èˆ‡ Azure å…¬é›²å ¡å£˜çš„ LC ä»‹æ¥ï¼Œå£«æ°å…„å»ºè­°å¯ä»¥å¾… ICTINV ç™»éŒ„å®Œæˆå†ä¾†æå‡º LC æ”¶å®¹ç”³è«‹ã€‚

---

Event Hub --> Azure Function --> Syslog

---




---


CHTSOCç³»çµ±æ—¥èªŒä¼ºæœå™¨ï¼šä¹‹å¾Œï¼¡ï½šï½•ï½’ï½…æœƒæä¾›ï¼¬ï¼£ï¼ï¼¬ï¼³

---
ï½…ï½™ï½…ï½“ï½…ï½…ç›£æ§
